\begin{lstlisting}[style=conjClojure]
(defn tree-split-rte [leaves pivot]
  (if (= 1 leaves)
    (rand-nth inhabited-leaves)
    (let [rte (let [left-size (pivot leaves)]
                (letfn [(left  [] (tree-split-rte left-size pivot))
                        (right [] (tree-split-rte (- leaves left-size) pivot))
                        (mid   [] (tree-split-rte leaves pivot))]
                  (weighted-case 20 (list :cat (left) (right))
                                 30 (list :and (left) (right))
                                 30 (list :or (left) (right))
                                 5  (list :* (mid))
                                 15 (list :not (mid)))))
          leaf-count (rte/count-leaves rte)]
      rte)))
\end{lstlisting}
